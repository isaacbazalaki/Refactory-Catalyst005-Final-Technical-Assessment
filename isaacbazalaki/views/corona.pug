doctype html
head
    meta(charset='UTF-8')
    meta(name='viewport' content='width=device-width,initial-scale=1')
    link(rel='stylesheet' href='https://use.fontawesome.com/releases/v5.3.1/css/all.css' integrity='sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU' crossorigin='anonymous')
    link(rel='stylesheet' href='/file:///C:/Users/ISAAC/Desktop/classProject/fontawesome-free-5.14.0-web/css/all.css')
    link(rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css')
    link(rel='stylesheet' href='/css/bootstrap.min.css')
    title catalyst cohort 005
    style.
        .error {
            color: red;
            font-size: .8rem;
            }
form.covid(style='border:1px solid black; margin-top:15px;' action='/corona' method='post' name='corona' id="corona")
    .container-fluid
        .row
            .col-lg-12
                img(src='../images/photo_2020-08-14_13-34-09.jpg' alt='' width='100%' height='100%')

    div
        h6(style='text-align: center;')
            | Ministry of Health
    div
        h3(style='text-align: center; font-weight:bold;')
            | COVID19(CORONA VIRUS)
    div
        h6(style='text-align: center;')
            | Virus-Test Registration Form
    .form-row(style='margin-left:20px; margin-right:20px;')
        .form-group.col-md-6
            label(for='surname') Surname
            input.form-control(type='text' name='surname' id="surname" maxlength="20" minlength="2")
            div(class='error' id='surErr')
        .form-group.col-md-6
            label(for='givenName') Given Name
            input.form-control(type='text' name='givenName' id="givenName" maxlength="20" minlength="2")
            div(class='error' id='givErr')
    .form-row(style='margin-left:20px; margin-right:20px;')
        .form-group.col-md-6
            label(for='dateOfBirth') Date of birth
            input.form-control(type='date' name='dateOfBirth' placeholder='YY/MM/DD' id="dateOfBirth")
            div(class='error' id='dateErr')
        .form-group.col-md-6
            label(for='placeOfResidence') Place of Residence
            input.form-control(type='text' id='placeOfResidence' name='placeofResidence' minlength="2" )
            div(class='error' id='placeErr') 
    .form-row(style='margin-left:20px; margin-right:20px;')
        .form-group.col-md-6
            label(for='occupation') Occupation
            input.form-control(type='text' id='occupation' name='occupation' minlength="2" )
            div(class='error' id='occErr') 
        .form-group.col-md-6
            label(for='nationality') Nationality
            input.form-control(type='text' id='nationality' name='nationality' )
            div(class='error' id='natErr') 
    .form-row(style='margin-left:20px; margin-right:20px;')
        .form-group.col-md-6
            label(for='gender') Gender
            br
            input(type='radio' name='gender' id="gender" value='male' )
            | Male
            input(type='radio' style='margin-left: 150px;' name='gender' id="gender" value='female')
            | Female
    .form-row(style='margin-left:20px; margin-right:20px;')
        .form-group.col-md-12
            label(for='category') Category
            select.form-control(name='category' id='category')
                div(class='error' id='catErr')
                option(value='default') --Select Category--
                option(value='returnee') Returnee
                option(value='contact') Contact
                option(value='volunteer') Volunteer
                option(value='alert') Alert

        button(class=" btn btn-primary" type="submit" onclick="validate()" value="register", style='margin-left: 900px; padding:3px 60px; margin bottom: 80px') Register
    script.
        function validate() {
            var surname = document.corona.surname.value
            var givenName = document.corona.givenName.value
            var dateOfBirth = document.corona.dateOfBirth.value
            var placeOfResidence = document.corona.placeOfResidence.value
            var occupation = document.corona.occupation.value
            var nationality = document.corona.nationality.value
            var category = document.corona.category.value


            function printError(elementId, invalidInput) {
                document.getElementById(elementId).innerHTML = invalidInput;
            }

            var surErr = givErr = dateErr = placeErr = occErr = natErr = genErr =  catErr = true


            if (surname.length === "") {
                printError("surErr", "This field is required");
            } else {
                var regex = /^[a-zA-Z\s]+$/;
                if (regex.test(surname) === false) {
                    printError("surErr", "please enter a valid name")
                } else {
                    printError("surErr", "")
                    surErr = false;
                }
            }

            if (givenName.length === "") {
                printError("givErr", "This field is required");
            } else {
                var regex = /^[a-zA-Z\s]+$/;
                if (regex.test(givenName) === false) {
                    printError("givErr", "please enter a valid name")
                } else {
                    printError("givErr", "")
                    givErr = false;
                }
            }

            if (dateOfBirth.length === "") {
                printError("dateErr", "Select Date of Birth");
            } else {
                printError("dateErr", "");
                dateErr = false;
            }

            if (placeOfResidence.length === "") {
                printError("placeErr", "please enter your placeOfResidence");
            } else {
                var regex = /^[a-zA-Z\s]+$/;
                if (regex.test(placeOfResidence) === false) {
                    printError("placeErr", "please enter a valid placeOfResidence")
                } else {
                    printError("placeErr", "")
                    placeErr = false;
                }
            }

            if (occupation.length === "") {
                printError("occErr", "This field is required");
            } else {
                var regex = /^[a-zA-Z\s]+$/;
                if (regex.test(occupation) === false) {
                    printError("occErr", "please enter a valid occupation")
                } else {
                    printError("occErr", "")
                    occErr = false;
                }
            }

            if (nationality.length === "") {
                printError("natErr", "This field is required");
            } else {
                var regex = /^[a-zA-Z\s]+$/;
                if (regex.test(nationality) === false) {
                    printError("natErr", "please enter a valid nationality")
                } else {
                    printError("natErr", "")
                    natErr = false;
                }
            }

            if (category.length === "") {
                printError("catErr", " Select Patient category");
            } else {
                printError("catErr", "");
                catErr = false;
            }

            if (( surErr || givErr || dateErr || placeErr || occErr || natErr || genErr ||  catErr) == true) {
                
                event.preventDefault()
            } else {
                event.currentTarget.submit()
            };
        }
